<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>cluedo junior logs</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>

    <div class="starter-template">
        <h1>Кто съел торт?</h1>
    </div>
    <div id="content" class="container-fluid"/>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <script type="text/babel">
        class GameElement extends React.Component {
            constructor (props) {
              super(props);
              this.state = {checked: 0};
            }

            handleClick (event) {
                if (this.state.checked == 2) {
                    this.setState({checked: 0});
                }
                else {
                    this.setState({checked: 1 - this.state.checked});
                }
            }
            
            handleDbClick (event) {
              this.setState({checked: 2});
            }

            render () {
                var img;
                if (this.props.img) {
                    var imgTxt = 'img/' + this.props.img
                    img = <img src={imgTxt} className="img-responsive img-circle" alt='{this.props.name}'/>
                }

                var txt;
                switch (this.state.checked) {
                    case 0:
                        txt = <strong> {this.props.name} </strong>
                        break
                    case 1:
                        txt = <del> {this.props.name} </del>
                        break
                    case 2:
                        txt = <mark> {this.props.name} </mark>
                        break
                }

                return (
                    <p onClick={this.handleClick.bind(this)}
                       onDoubleClick={this.handleDbClick.bind(this)}>
                      {img}
                      {txt}
                    </p>
                )
            }
        }

        class Title extends React.Component {
            render () {
                return (
                    <h2> {this.props.name} </h2>
                )
            }
        }

        class LogRow extends React.Component {
          render () {
            return (
                <div className="row">
                    <div className="col-md-1 col-md-offset-1">
                        {this.props.children[0]}
                    </div>
                    {this.props.children[1].map( col => {
                        return (
                            <div className="col-md-1">
                                {col}
                            </div>
                        )
                    })}
                </div>
            )
          }
        }

        class LogGrid extends React.Component {
          constructor(props) {
            super(props);
            this.state = {
              persons: [
                {id: 0, name: "Полк.Мастард" , img: "mustard.png"},
                {id: 1, name: "Мисс Скарлет" , img: "scarlett.png"},
                {id: 2, name: "М-р Грин"     , img: "green.png"},
                {id: 3, name: "М-с Пикок"    , img: "peacock.png"},
                {id: 4, name: "М-с Уайт"     , img: "white.png"},
                {id: 5, name: "Проф. Плам"   , img: "plum.png"}
              ],
              places: [
                {id: 0, name: "Бильярдный стол",  img: "snooker.png" },
                {id: 1, name: "Письменный стол",  img: "work-table.png" },
                {id: 2, name: "Кресло",           img: "chear.png" },
                {id: 3, name: "Пианино",          img: "piano.png" },
                {id: 4, name: "Цветочный горшок", img: "flower.png" },
                {id: 5, name: "Обеденный стол",   img: "table.png" }
              ],
              times: [
                {name: "1:00"},
                {name: "2:00"},
                {name: "3:00"},
                {name: "4:00"},
                {name: "5:00"}
              ],
              drinks: [
                {name: "Яболчный сок"   , img: "apple.png"},
                {name: "Какао"          , img: "cocao.png"},
                {name: "Вода"           , img: "water.png"},
                {name: "Кола"           , img: "cola.png"},
                {name: "Лимонад"        , img: "lemon.png"}
              ]
            }
          }

          render () {
            return (
            <div>
                <LogRow>
                    <Title name="Герои" />
                    {this.state.persons.map(p => { return ( <GameElement name={p.name} img={p.img}/> ) })}
                </LogRow>
                <LogRow>
                    <Title name="Места" />
                    {this.state.places.map(p => { return ( <GameElement name={p.name} img={p.img}/> ) })}
                </LogRow>
                <LogRow>
                    <Title name="Время" />
                    {this.state.times.map(p => { return ( <GameElement name={p.name}/> ) })}
                </LogRow>
                <LogRow>
                    <Title name="Напитки" />
                    {this.state.drinks.map(p => { return ( <GameElement name={p.name} img={p.img}/> ) })}
                </LogRow>
            </div>
            )
          }
        }

        ReactDOM.render(
          <LogGrid />,
          document.getElementById('content')
        );
    </script>
    </body>
</html>
